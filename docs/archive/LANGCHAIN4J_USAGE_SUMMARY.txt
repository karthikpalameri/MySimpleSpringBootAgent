â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘   LANGCHAIN4J USAGE ANALYSIS - Document Transformer & Splitter             â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

QUESTION:
  Are we using langchain4j-document-transformer-jsoup and splitter?

ANSWER: âŒ NO

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¦ DEPENDENCIES IN POM.XML

  âœ… INCLUDED:
     â€¢ jsoup:1.17.2                           (Direct Jsoup usage)
     â€¢ htmlcompressor:1.5.2                   (HTML minification)
     â€¢ commons-lang3                          (String utilities)
     â€¢ commons-text:1.12.0                    (String operations)
     â€¢ langchain4j-spring-boot-starter:1.10.0 (Core LangChain4j)
     â€¢ langchain4j-open-ai-spring-boot-starter (AI compatibility)

  âŒ NOT INCLUDED:
     â€¢ langchain4j-document-transformer-jsoup â† NOT USED
     â€¢ langchain4j-document-splitter          â† NOT USED
     â€¢ langchain4j-rag-content-retriever      â† NOT USED

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ› ï¸ HOW WE PROCESS HTML (Not Using Document Transformer)

  HtmlPreprocessor.java:
  â”œâ”€ Parse:     Jsoup.parse(htmlContent)
  â”œâ”€ Clean:     doc.select("script, style").remove()
  â”œâ”€ Process:   Remove noise elements inline
  â””â”€ Output:    Jsoup Document (not split/transformed)

  Why not Document Transformer?
  â€¢ Document Transformer is for RAG (Retrieval Augmented Generation)
  â€¢ We don't need document splitting
  â€¢ We process one HTML page at a time
  â€¢ We don't have a document corpus
  â€¢ ThreadLocal storage is sufficient

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¤– WHAT WE DO USE FROM LANGCHAIN4J

  Tool Calling (@Tool Annotation):
  
  DomQueryTools.java provides 6 @Tool methods:
  
  1. @Tool("Find element by ID")
     â””â”€ findById(String id)
     
  2. @Tool("Find by CSS selector")
     â””â”€ findByCss(String selector)
     
  3. @Tool("Find by XPath")
     â””â”€ findByXPath(String xpath)
     
  4. @Tool("Get all interactive elements")
     â””â”€ getAllInteractiveElements()
     
  5. @Tool("Find by text content")
     â””â”€ findByText(String text)
     
  6. @Tool("Find by attribute")
     â””â”€ findByAttribute(String name, String value)

  How it Works:
  â€¢ Claude AI has access to these @Tool methods
  â€¢ AI can call them when analyzing locators
  â€¢ Tools query the Jsoup Document (stored in ThreadLocal)
  â€¢ Results returned to AI for analysis

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š WHAT DOCUMENT TRANSFORMER IS FOR

  Document Transformer Purpose:
  â€¢ Chunk large documents into pieces
  â€¢ For RAG (Retrieval Augmented Generation)
  â€¢ For storing in vector databases
  â€¢ For semantic search across documents
  â€¢ For processing multiple documents

  Our Use Case:
  âœ… Single HTML page per request
  âœ… No RAG needed
  âœ… No document corpus
  âœ… No chunking/splitting required
  âœ… Direct tool-based querying better

  Conclusion: We don't need it! âœ…

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” CODE SEARCH RESULTS

  Searched entire codebase for:
  â€¢ DocumentSplitter                          âŒ Not found
  â€¢ DocumentTransformer                       âŒ Not found
  â€¢ langchain4j.*document.*transformer        âŒ Not found
  â€¢ import.*DocumentSplitter                  âŒ Not found
  â€¢ import.*DocumentTransformer               âŒ Not found

  Conclusion: These classes/interfaces are completely unused

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… ARCHITECTURE SUMMARY

  Request Flow:
  
  User Request
       â†“
  LocatorController
       â†“
  HtmlPreprocessor (uses Jsoup directly)
       â”œâ”€ Jsoup.parse()
       â”œâ”€ Remove scripts/styles
       â””â”€ Return Document
       â†“
  DomQueryTools.setDocument()
       â””â”€ Store in ThreadLocal
       â†“
  LocatorAnalyzerAI (Claude)
       â””â”€ Has access to 6 @Tool methods
       â†“
  AI calls tools as needed
       â”œâ”€ findByXPath()
       â”œâ”€ findByCss()
       â”œâ”€ getAllInteractiveElements()
       â””â”€ etc...
       â†“
  Tools query ThreadLocal Document
       â”œâ”€ Results: Matching elements
       â””â”€ Return to AI
       â†“
  AI analyzes results
       â””â”€ Returns best locator
       â†“
  Response to User

  âŒ NO Document Transformer/Splitter involved

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ KEY DECISION: WHY JSOUP DIRECTLY?

  Pros of using Jsoup directly:
  âœ… Simple and direct (no abstraction overhead)
  âœ… Full control over HTML processing
  âœ… Fast (no extra transformation layers)
  âœ… Works perfectly for single page
  âœ… Thread-safe with ThreadLocal
  âœ… No unnecessary dependencies

  When to use Document Transformer:
  â€¢ Processing multiple documents
  â€¢ Building RAG system
  â€¢ Need document chunking
  â€¢ Large document corpus
  â€¢ Vector database storage
  â†’ NOT our case!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ LANGCHAIN4J FEATURES WE ARE USING

  âœ… Using:
  â€¢ Agent framework (tool calling)
  â€¢ @Tool annotations
  â€¢ @SystemMessage & @UserMessage
  â€¢ @V (variable binding)
  â€¢ Tool-based LLM interaction
  â€¢ Chat model integration

  âŒ NOT Using:
  â€¢ Document transformers
  â€¢ Document splitters
  â€¢ RAG/retrieval
  â€¢ Embedding stores
  â€¢ Vector databases
  â€¢ Content retrievers

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š TOOL CALLING IN ACTION

  Example: User sends failed locator

  Request:
  {
    "locator": "//*[@id='old']",
    "htmlContent": "<html>...",
    "elementDescription": "Search button"
  }

  Processing:
  1. Parse HTML with Jsoup
  2. Store in ThreadLocal (DomQueryTools)
  3. Call AI with 3 params

  AI Analysis:
  4. AI: "Let me test the original locator"
     Tool Call: findByXPath("//*[@id='old']")
     Result: "Not found"

  5. AI: "Let me see all elements"
     Tool Call: getAllInteractiveElements()
     Result: "[{id: 'new', class: 'search'}, ...]"

  6. AI: "Let me search by text"
     Tool Call: findByText("Search button")
     Result: "Found <button id='new'>Search</button>"

  7. AI: "Let me test alternatives"
     Tool Call: findById("new")
     Result: "Found!"
     
     Tool Call: findByCss("button.search")
     Result: "Found!"

  8. AI returns recommendation:
     "Use By.ID = 'new' (most stable)"

  âŒ Never used Document Transformer/Splitter in this entire process

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… FINAL ANSWER

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Question: Are we using langchain4j-document-transformer-jsoup?  â”‚
â”‚ Answer: âŒ NO                                                    â”‚
â”‚                                                                  â”‚
â”‚ What are we using instead?                                      â”‚
â”‚ â€¢ Jsoup directly (simpler, more efficient)                      â”‚
â”‚ â€¢ LangChain4j tool calling (@Tool annotations)                  â”‚
â”‚ â€¢ ThreadLocal for thread-safe DOM storage                       â”‚
â”‚                                                                  â”‚
â”‚ Is this the right choice?                                       â”‚
â”‚ âœ… YES! Document Transformer is for RAG/large corpus.          â”‚
â”‚    Our use case doesn't need it.                                â”‚
â”‚                                                                  â”‚
â”‚ Recommendation:                                                  â”‚
â”‚ â€¢ Keep current implementation âœ…                                â”‚
â”‚ â€¢ No changes needed                                              â”‚
â”‚ â€¢ Minimal, efficient, purpose-built                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š RELATED FILES & ANALYSIS

  â€¢ DEPENDENCIES_ANALYSIS.md     â† Full analysis
  â€¢ pom.xml                      â† All dependencies
  â€¢ HtmlPreprocessor.java        â† HTML processing
  â€¢ DomQueryTools.java           â† Tool definitions
  â€¢ LocatorAnalyzerAI.java       â† AI integration

Analysis Date: 2026-01-26
Method: Serena MCP Code Search + File Analysis
